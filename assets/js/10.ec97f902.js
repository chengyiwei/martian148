(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{375:function(s,a,t){"use strict";t.r(a);var n=t(1),e=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"lldb-断点调试"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#lldb-断点调试"}},[s._v("#")]),s._v(" lldb 断点调试")]),s._v(" "),a("h2",{attrs:{id:"安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[s._v("#")]),s._v(" 安装")]),s._v(" "),a("p",[s._v("Mac 操作系统使用 lldb 即可，和 gdb 等价")]),s._v(" "),a("h2",{attrs:{id:"基本操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#基本操作"}},[s._v("#")]),s._v(" 基本操作")]),s._v(" "),a("p",[s._v("假设这个是我们的程序 "),a("code",[s._v("a.cpp")])]),s._v(" "),a("div",{staticClass:"language-cpp line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token macro property"}},[a("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),a("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("include")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("<cstdio>")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token macro property"}},[a("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),a("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("include")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("<iostream>")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("using")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("namespace")]),s._v(" std"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("F")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("n "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" n "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("F")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("n "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" p "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" i"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("++")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("printf")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"%d "')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t\tp "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" x "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("F")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("printf")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"\\n%d\\n"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br")])]),a("p",[s._v("我们使用命令行编译 "),a("code",[s._v("g++ a.cpp -o a -g")]),s._v("，"),a("code",[s._v("-g")]),s._v(" 表示编译时带有参数信息")]),s._v(" "),a("h3",{attrs:{id:"启动-lldb"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#启动-lldb"}},[s._v("#")]),s._v(" 启动 lldb")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("lldb a\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"断点操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#断点操作"}},[s._v("#")]),s._v(" 断点操作")]),s._v(" "),a("p",[s._v("比如，你想在 "),a("code",[s._v("main()")]),s._v(" 函数入口打个断点：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("(lldb) break set -n main\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("当然我也可以在设定在具体某一行打断点，例如，我们想在第 13 行打上断点，可以执行")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("(lldb) break set -f a.cpp -l 13\nBreakpoint 2: where = a`main + 52 at a.cpp:13:17, address = 0x0000000100003f14\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[a("strong",[s._v("查看断点列表")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("(lldb) break list\nCurrent breakpoints:\n1: name = 'main', locations = 1\n  1.1: where = a`main + 16 at a.cpp:11:6, address = 0x0000000100003ef0, unresolved, hit count = 0 \n\n2: file = 'a.cpp', line = 13, exact_match = 0, locations = 1\n  2.1: where = a`main + 52 at a.cpp:13:17, address = 0x0000000100003f14, unresolved, hit count = 0 \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[a("strong",[s._v("删除断点")])]),s._v(" "),a("p",[s._v("我们通过 "),a("code",[s._v("break list")]),s._v(" 操作可以知道现在的所有断点")]),s._v(" "),a("p",[s._v("我们可以通过 "),a("code",[s._v("breakpoint delete [编号]")]),s._v(" 来删除指定的断点")]),s._v(" "),a("p",[s._v("也可以通过 "),a("code",[s._v("breakpoint delete")]),s._v(" 来删除所有断点")]),s._v(" "),a("h3",{attrs:{id:"运行程序"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#运行程序"}},[s._v("#")]),s._v(" 运行程序")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("(lldb) run\nProcess 13718 launched: '/Users/martian148/Desktop/test/a' (arm64)\nProcess 13718 stopped\n* thread #1, queue = 'com.apple.main-thread', stop reason = breakpoint 1.1\n    frame #0: 0x0000000100003ef0 a`main at a.cpp:11:6\n   8    }\n   9   \n   10   int main() {\n-> 11           int p = 0;\n   12           for (int i = 1; i <= 10; i++) {\n   13                   printf(\"%d \", i * i);\n   14                   p += 1;\nTarget 0: (a) stopped.\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("p",[s._v("使用 "),a("code",[s._v("run")]),s._v(" 启动程序的时候，执行到断点会自动停下来")]),s._v(" "),a("h3",{attrs:{id:"单步到下一行"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#单步到下一行"}},[s._v("#")]),s._v(" 单步到下一行")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("next\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("不进函数，直接跳转到下一步")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("(lldb) next\nProcess 13718 stopped\n* thread #1, queue = 'com.apple.main-thread', stop reason = step over\n    frame #0: 0x0000000100003ef4 a`main at a.cpp:12:11\n   9   \n   10   int main() {\n   11           int p = 0;\n-> 12           for (int i = 1; i <= 10; i++) {\n   13                   printf(\"%d \", i * i);\n   14                   p += 1;\n   15           }\nTarget 0: (a) stopped.\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("h3",{attrs:{id:"继续执行到下一个断点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#继续执行到下一个断点"}},[s._v("#")]),s._v(" 继续执行到下一个断点")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("continue\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"查看变量的值"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看变量的值"}},[s._v("#")]),s._v(" 查看变量的值")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("frame variable\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("查看当前函数作用域里面的变量")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("(lldb) frame variable\n(int) p = 0\n(int) x = 63471776\n(int) i = 1\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("如果只想知道一个变量的值，可以使用 "),a("code",[s._v("frame variable [变量名]")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("(lldb) frame variable i\n(int) i = 1\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("使用 "),a("code",[s._v("print [变量名]")]),s._v("可以打印变量的值，也可以简写成 "),a("code",[s._v("p")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("(lldb) print i\n(int) 1\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("甚至可以打印函数的调用结果")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("(lldb) print F(3)\n(int) 6\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("你还可以开启 "),a("em",[s._v("表达式观察")]),s._v("，程序一走到断点就自动显示变化")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("(lldb) watchpoint set variable [变量名]\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("每次 "),a("code",[s._v("continue")]),s._v(" 后，当指定为 watchpoint 观察的变量修改后会自动停下")]),s._v(" "),a("p",[s._v("当然还可以给观察点加条件，例如：当 "),a("eq",[a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[a("semantics",[a("mrow",[a("mi",[s._v("p")]),a("mo",[s._v("=")]),a("mn",[s._v("5")])],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("p=5")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"0.625em","vertical-align":"-0.19444em"}}),a("span",{staticClass:"mord mathdefault"},[s._v("p")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),a("span",{staticClass:"mrel"},[s._v("=")]),a("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}})]),a("span",{staticClass:"base"},[a("span",{staticClass:"strut",staticStyle:{height:"0.64444em","vertical-align":"0em"}}),a("span",{staticClass:"mord"},[s._v("5")])])])])]),s._v(" 的时候停下")],1),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('watchpoint modify -c "p == 5"\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("使用 "),a("code",[s._v("watchpoint list")]),s._v(" 可以查看观察点列表，使用 "),a("code",[s._v("watchpoint delete [编号]")]),s._v(" 可以删除观察点")]),s._v(" "),a("h3",{attrs:{id:"进入函数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#进入函数"}},[s._v("#")]),s._v(" 进入函数")]),s._v(" "),a("p",[s._v("当运行到第 17 行，使用 "),a("code",[s._v("step")]),s._v(" 就可以进入到函数内部了，使用 "),a("code",[s._v("next")]),s._v(" 会跳过函数")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("(lldb) break set -f a.cpp -l 17\nBreakpoint 2: where = a`main + 120 at a.cpp:17:10, address = 0x0000000100003f58\n(lldb) continue\nProcess 14799 resuming\nProcess 14799 stopped\n* thread #1, queue = 'com.apple.main-thread', stop reason = breakpoint 2.1\n    frame #0: 0x0000000100003f58 a`main at a.cpp:17:10\n   14                   p += 1;\n   15           }\n   16  \n-> 17           int x = F(5);\n   18           printf(\"\\n%d\\n\", x);\n   19   }\nTarget 0: (a) stopped.\n(lldb) step\nProcess 14799 stopped\n* thread #1, queue = 'com.apple.main-thread', stop reason = step in\n    frame #0: 0x0000000100003e8c a`F(n=5) at a.cpp:6:6\n   3    using namespace std;\n   4   \n   5    int F(int n) {\n-> 6            if (n == 0) return 1;\n   7            return n * F(n - 1);\n   8    }\n   9   \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br")])]),a("p",[s._v("可以看到，进入了函数 F 中")]),s._v(" "),a("h2",{attrs:{id:"进阶操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#进阶操作"}},[s._v("#")]),s._v(" 进阶操作")]),s._v(" "),a("h3",{attrs:{id:"当前线程的调用栈"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#当前线程的调用栈"}},[s._v("#")]),s._v(" 当前线程的调用栈")]),s._v(" "),a("p",[s._v("当我们第一次进度 F 函数，即 "),a("code",[s._v("F(5)")]),s._v(" 时，运行 "),a("code",[s._v("bt")]),s._v(" 命令，就可以现实当前线程的调用栈了")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("lldb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" step\nProcess "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14799")]),s._v(" stopped\n* thread "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#1, queue = 'com.apple.main-thread', stop reason = step in")]),s._v("\n    frame "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#0: 0x0000000100003e8c a`F(n=5) at a.cpp:6:6")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("    using namespace std"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("   \n   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("    int F"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("int n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n-"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("n "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("return")]),s._v(" n * F"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("n - "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v("   \nTarget "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(": "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" stopped.\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("lldb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" bt\n* thread "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#1, queue = 'com.apple.main-thread', stop reason = step in")]),s._v("\n  * frame "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#0: 0x0000000100003e8c a`F(n=5) at a.cpp:6:6")]),s._v("\n    frame "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#1: 0x0000000100003f60 a`main at a.cpp:17:10")]),s._v("\n    frame "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#2: 0x000000019a234274 dyld`start + 2840")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br")])]),a("p",[s._v("下面逐行解释一下")]),s._v(" "),a("ul",[a("li",[a("p",[a("code",[s._v("thread #1, queue = 'com.apple.main-thread', stop reason = step in")]),s._v("这表示当前是在 主线程 ("),a("code",[s._v("main-thread")]),s._v(") 中，程序因为你执行了 "),a("code",[s._v("step")]),s._v(" 命令而停下来了。"),a("code",[s._v("step in")]),s._v(" 意味着你进入了函数 "),a("code",[s._v("F(n=5)")]),s._v("。")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("frame #0: 0x0000000100003e8c a")]),s._v("F(n=5) at a.cpp:6:6`\n这是 当前栈帧（栈的顶部）。")]),s._v(" "),a("ul",[a("li",[s._v("你现在正停在 "),a("code",[s._v("F")]),s._v(" 函数的第 6 行："),a("code",[s._v("if (n == 0) return 1;")]),s._v("。")]),s._v(" "),a("li",[a("code",[s._v("n=5")]),s._v(" 是传递给 "),a("code",[s._v("F")]),s._v(" 函数的参数，表示你在计算 "),a("code",[s._v("F(5)")]),s._v("。")])])]),s._v(" "),a("li",[a("p",[a("code",[s._v("frame #1: 0x0000000100003f60 a")]),s._v("main at a.cpp:17:10"),a("code",[s._v("这是上一个栈帧，也就是调用")]),s._v("F(5)` 的地方。")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("main")]),s._v(" 函数在 "),a("code",[s._v("a.cpp")]),s._v(" 的第 17 行停下："),a("code",[s._v("int x = F(5);")]),s._v("。")]),s._v(" "),a("li",[s._v("这是函数 "),a("code",[s._v("F")]),s._v(" 的调用位置。")])])]),s._v(" "),a("li",[a("p",[a("code",[s._v("frame #2: 0x0000")]),s._v(" 这是栈的 "),a("strong",[s._v("最底层")]),s._v("，指向 "),a("code",[s._v("main")]),s._v(" 函数的返回地址或程序的结束。")])])])])}),[],!1,null,null,null);a.default=e.exports}}]);